<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title data-key="signup">Üye Ol</title>
    <link rel="stylesheet" href="css/style.css" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicons -->
    <link
      href="assets/img/masonry-portfolio/stethoscope-icon.webp"
      rel="icon"
    />
    <link
      href="assets/img/masonry-portfolio/stethoscope-icon.webp"
      rel="stethoscope-icon"
    />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&family=Jost:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link
      href="assets/vendor/glightbox/css/glightbox.min.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <!-- Main CSS File -->
    <link href="assets/css/main.css" rel="stylesheet" />
    <link href="assets/css/signup.css" rel="stylesheet" />
  </head>
  <body class="index-page">
    <div id="header-container"></div>

    <div class="signup-container">
      <h1 data-key="signup">Üye Ol</h1>
      <form
        action="/signup.html"
        method="post"
        onsubmit="return validateForm()"
      >
        <label for="firstName" data-key="name">İsim:</label>
        <input type="text" id="firstName" name="firstName" required />

        <label for="lastName" data-key="surname">Soyisim:</label>
        <input type="text" id="lastName" name="lastName" required />

        <label for="email">E-mail:</label>
        <input type="email" id="email" name="email" required />

        <label for="password" data-key="password">Şifre:</label>
        <div class="password-container">
          <input type="password" id="password" name="password" required />
          <i class="fas fa-eye" id="togglePassword"></i>
        </div>
        <span id="passwordError" class="error" data-key="passworderror">
          Şifre en az 8 karakter, bir büyük harf, bir küçük harf ve bir rakam
          içermelidir.
        </span>

        <label for="confirmPassword" data-key="confirmpassword"
          >Şifreyi Doğrulayın:</label
        >
        <div class="password-container">
          <input
            type="password"
            id="confirmPassword"
            name="confirmPassword"
            required
          />
          <i class="fas fa-eye" id="toggleConfirmPassword"></i>
        </div>
        <span
          id="confirmPasswordError"
          class="error"
          data-key="confirmpassworderror"
          >Şifreler uyuşmuyor.</span
        >
        <!-- KVKK Agreement Checkbox -->
        <div class="kvkk-container">
          <input
            type="checkbox"
            id="kvkkAgreement"
            name="kvkkAgreement"
            required
          />
          <label for="kvkkAgreement" class="kvkk-agreement">
            <span data-key="agreekvkk">
              <a href="#" id="kvkkLink" data-key="kvkk">KVKK Metni</a>'ni okudum
              ve kabul ediyorum
            </span>
          </label>
        </div>
        <!-- KVKK Modal -->
        <div id="kvkkModal" class="modal hidden">
          <div class="modal-content">
            <span class="close" id="kvkkClose">&times;</span>
            <h2>KVKK Metni</h2>
            <iframe
              id="kvkkPdf"
              src="assets/img/KVKK_Politikası_2024.pdf"
              width="100%"
              height="500px"
            ></iframe>

            <button id="kvkkAccept">Tamam</button>
          </div>
        </div>
        <span id="kvkkError" class="error" data-key="kvkkerror">
          KVKK metnini kabul etmeden devam edemezsiniz.
        </span>

        <button type="submit" data-key="signup">Üye Ol</button>
      </form>

      <div class="login-link">
        <p>
          <span data-key="haveanaccount">Zaten hesabınız var mı?</span>
          <a href="/login.html" data-key="login">Giriş Yap</a>
        </p>
      </div>
    </div>

    <!-- Scroll Top -->
    <a
      href="#"
      id="scroll-top"
      class="scroll-top d-flex align-items-center justify-content-center"
      ><i class="bi bi-arrow-up-short"></i
    ></a>

    <script>
      window.addEventListener("scroll", function () {
        const body = document.querySelector("body");

        if (window.scrollY > 50) {
          body.classList.add("scrolled");
        } else {
          body.classList.remove("scrolled");
        }
      });

      function validateForm() {
        const password = document.getElementById("password").value;
        const confirmPassword =
          document.getElementById("confirmPassword").value;
        const kvkkAgreement = document.getElementById("kvkkAgreement").checked;

        const passwordError = document.getElementById("passwordError");
        const confirmPasswordError = document.getElementById(
          "confirmPasswordError"
        );
        const errorMessage = document.getElementById("error-message");
        const kvkkError = document.getElementById("kvkkError");

        const passwordPattern =
          /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/;

        let isValid = true;

        // Validate password pattern
        if (!passwordPattern.test(password)) {
          passwordError.style.display = "block";
          isValid = false;
        } else {
          passwordError.style.display = "none";
        }

        // Validate confirm password
        if (password !== confirmPassword) {
          confirmPasswordError.style.display = "block";
          isValid = false;
        } else {
          confirmPasswordError.style.display = "none";
        }

        return isValid; // Return false if any validation fails
      }

      document
        .getElementById("togglePassword")
        .addEventListener("click", function () {
          const passwordInput = document.getElementById("password");
          const icon = this;

          if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
          } else {
            passwordInput.type = "password";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
          }
        });

      document
        .getElementById("toggleConfirmPassword")
        .addEventListener("click", function () {
          const confirmPasswordInput =
            document.getElementById("confirmPassword");
          const icon = this;

          if (confirmPasswordInput.type === "password") {
            confirmPasswordInput.type = "text";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
          } else {
            confirmPasswordInput.type = "password";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
          }
        });

      document.addEventListener("DOMContentLoaded", function () {
        const kvkkLink = document.getElementById("kvkkLink");
        const kvkkModal = document.getElementById("kvkkModal");
        const kvkkClose = document.getElementById("kvkkClose");
        const kvkkAccept = document.getElementById("kvkkAccept");

        // Open modal on clicking the link
        kvkkLink.addEventListener("click", function (e) {
          e.preventDefault();
          kvkkModal.style.display = "block";
        });

        // Close modal when clicking the close button or the accept button
        kvkkClose.addEventListener("click", function () {
          kvkkModal.style.display = "none";
        });

        kvkkAccept.addEventListener("click", function () {
          kvkkModal.style.display = "none";
          document.getElementById("kvkkAgreement").checked = true; // Optionally check the checkbox
        });

        // Close modal if user clicks outside of the modal content
        window.addEventListener("click", function (event) {
          if (event.target == kvkkModal) {
            kvkkModal.style.display = "none";
          }
        });
      });
    </script>
    <script src="header.js"></script>
    <script src="language.js"></script>
  </body>
</html>
